{"version":3,"sources":["../src/js/mcage.ts"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","TimeDelta","[object Object]","time","years","Math","floor","months","days","parts","forEach","p","key","substr","length","push","join","params","URLSearchParams","window","location","search","filterableProperties","filter","has","set","versions","res","fetch","json","get_manifest","get","v","version","delta","Date","now","parse","releaseTime","age","id","link","document","body","innerHTML","getElementById","style","display"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,MAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGtE,WACWZ,UAAUC,UAAM,OAAQ,EAAQ,YAOnC,MAAMkB,EACFC,YAAYC,GACRA,GAAQ,MACRpB,KAAKqB,MAAQC,KAAKC,MAAMH,EAAO,QAC/BA,GAAQ,OACRpB,KAAKwB,OAASF,KAAKC,MAAMH,EAAO,MAChCA,GAAQ,KACRpB,KAAKyB,KAAOH,KAAKC,MAAMH,GAE3BD,WACI,IAAIO,EAAQ,GAQZ,MAPA,CAAC,QAAS,SAAU,QAAQC,QAAQC,IAChC,IAAInB,EAAQT,KAAK4B,GACbC,EAAMD,EAAEE,OAAO,EAAGF,EAAEG,OAAS,GAC7BtB,GACAiB,EAAMM,QAAQvB,KAASoB,IAAMpB,EAAQ,EAAI,IAAM,QAGhDiB,EAAMO,KAAK,OAAS,UAGnC,MAAMC,EAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QAC7CC,EAAuB,CAAC,KAAM,QAC2B,IAA3DA,EAAqBC,OAAOZ,GAAKM,EAAOO,IAAIb,IAAIG,QAChDG,EAAOQ,IAAI,OAAQ,WAGvB,IAAIC,SAjCJ,WACI,OAAO5C,UAAUC,UAAM,OAAQ,EAAQ,YACnC,IAAI4C,QAAYC,MAAM,iEACtB,aAAaD,EAAIE,SA6BFC,IACCJ,SACxB,IAAK,MAAMf,KAAKW,EACRL,EAAOc,IAAIpB,KACXe,EAAWA,EAASH,OAAOS,GAAKf,EAAOc,IAAIpB,KAAOqB,EAAErB,KAG5De,EAAShB,QAAQuB,IACb,IAAIC,EAAQC,KAAKC,MAAQD,KAAKE,MAAMJ,EAAQK,aACxCC,eAAmBN,EAAQO,SAAS,IAAIvC,EAAUiC,UAClDO,EAAO,OAASR,EAAQO,GAC5BE,SAASC,KAAKC,0CAA4CH,MAASF,cAEnEb,EAASZ,OAAS,IAClB4B,SAASG,eAAe,SAASC,MAAMC,QAAU,aAhD7D","sourcesContent":["(async function () {\n    interface Manifest {\n        latest: {\n            release: string;\n            snapshot: string;\n        };\n        versions: {\n            id: string\n            type: string\n            url: string\n            time: string\n            releaseTime: string\n        }[];\n    }\n\n    async function get_manifest(): Promise<Manifest> {\n        let res = await fetch(\"https://launchermeta.mojang.com/mc/game/version_manifest.json\");\n        return await res.json();\n    }\n\n    class TimeDelta {\n        years: number;\n        months: number;\n        days: number;\n\n        constructor(time: number) {\n            time /= 24 * 60 * 60 * 1000;\n            this.years = Math.floor(time / 365.25);\n\n            time %= 365.25;\n            this.months = Math.floor(time / 30.5);\n\n            time %= 30.5;\n            this.days = Math.floor(time);\n        }\n\n        toString() {\n            let parts = [];\n            [\"years\", \"months\", \"days\"].forEach(p => {\n                let value = this[p];\n                let key = p.substr(0, p.length - 1);\n                if (value) {\n                    parts.push(`${value} ${key}${value > 1 ? \"s\" : \"\"}`);\n                }\n            });\n            return parts.join(\", \") || \"0 days\";\n        }\n    }\n\n    const params = new URLSearchParams(window.location.search);\n\n    const filterableProperties = [\"id\", \"type\"];\n\n    if (filterableProperties.filter(p => params.has(p)).length === 0) {\n        params.set(\"type\", \"release\");\n    }\n\n    const manifest = await get_manifest();\n\n    let versions = manifest.versions;\n    for (const p of filterableProperties) {\n        if (params.get(p)) {\n            versions = versions.filter(v => params.get(p) === v[p]);\n        }\n    }\n    versions.forEach(version => {\n        let delta = Date.now() - Date.parse(version.releaseTime);\n\n        let age = `Minecraft ${version.id} is ${new TimeDelta(delta)} old.`;\n        let link = \"?id=\" + version.id;\n\n        document.body.innerHTML += `<p class=\"version\"><a href=\"${link}\">${age}</a></p>`;\n    });\n    if (versions.length > 1) {\n        document.getElementById(\"intro\").style.display = \"initial\";\n    }\n})();\n"],"file":"mcage.min.js"}